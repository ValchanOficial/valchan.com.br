---
date: 2021-02-23
title: "ReactJS + VariÃ¡veis de ambiente"
description: "Utilizando variÃ¡veis de ambiente customizÃ¡veis e default no React"
category: "React"
image: '/assets/img/cover.png'
---

VocÃª pode adicionar vÃ¡rias configuraÃ§Ãµes de desenvolvimento e produÃ§Ã£o definindo variÃ¡veis de ambiente em seu shell ou utilizando um arquivo .env.
InformaÃ§Ãµes tiradas da prÃ³pria documentaÃ§Ã£o do Create React App.

<h2>PadrÃ£o:</h2>

Por padrÃ£o, estas sÃ£o as variÃ¡veis jÃ¡ existentes do React:<br>
âœ… = Usado<br>
ğŸš« = Ignorado<br>
CRA = Create React App<br>

<table>
  <tr>
    <th>VariÃ¡vel</th>
    <th>Dev</th>
    <th>Prod</th>
    <th>Uso</th>
  </tr>
  <tr>
    <td>BROWSER</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Por padrÃ£o, o CRA abrirÃ¡ o navegador padrÃ£o do sistema, favorecendo o Chrome no macOS. Ã‰ possÃ­vel especificar um navegador para substituir esse comportamento ou defini-lo como <mark>none</mark> para desativÃ¡-lo completamente. Se vocÃª precisar personalizar a forma como o navegador Ã© iniciado, pode especificar em um script. Quaisquer argumentos passados para o <mark>npm start</mark> tambÃ©m serÃ£o passados para este script, e a url onde seu aplicativo Ã© servido serÃ¡ o Ãºltimo argumento. O seu arquivo de script deve conter a extensÃ£o <mark>.js</mark>. </th>
  </tr>
  <tr>
    <td>BROWSER_ARGS</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Quando a variÃ¡vel de ambiente <mark>BROWSER</mark> Ã© especificada, quaisquer argumentos que vocÃª definir para esta variÃ¡vel de ambiente serÃ£o passados para a instÃ¢ncia do navegador. VÃ¡rios argumentos sÃ£o suportados como uma lista separada por espaÃ§o. Por padrÃ£o, nenhum argumento Ã© passado para os navegadores.</th>
  </tr>
  <tr>
    <td>HOST</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Por padrÃ£o, o CRA se liga a todos os nomes de host no dispositivo (<mark>localhost</mark>, endereÃ§o de rede LAN, etc.). VocÃª pode usar esta variÃ¡vel para especificar um host diferente.</th>
  </tr>
  <tr>
    <td>PORT</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Por padrÃ£o, o CRA tentarÃ¡ escutar na porta <mark>3000</mark> ou solicitarÃ¡ que vocÃª tente a prÃ³xima porta disponÃ­vel. VocÃª pode usar esta variÃ¡vel para especificar uma porta diferente.</th>
  </tr>
  <tr>
    <td>HTTPS</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Quando definido como <mark>true</mark>, o CRA executarÃ¡ no modo <mark>https</mark>.</th>
  </tr>
  <tr>
    <td>WDS_SOCKET_HOST</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Ao ser setado, o CRA executarÃ¡ com o websocket hostname que foi configurado. Normalmente, o webpack-dev-server padrÃ£o do hostname SockJS Ã© <mark>window.location.hostname</mark>. AlÃ©m disso vocÃª pode utilizar esta variÃ¡vel em dev local em mais de um projeto CRA ao mesmo tempo.
    </th>
  </tr>
  <tr>
    <td>WDS_SOCKET_PATH</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Ao ser setado, o CRA executarÃ¡ com o websocket path que foi configurado para o mÃ³dulo de hot reloading. Normalmente, o webpack-dev-server padrÃ£o do pathname SockJS Ã© <mark>/sockjs-node</mark>. AlÃ©m disso vocÃª pode utilizar esta variÃ¡vel em dev local em mais de um projeto CRA ao mesmo tempo.
    </th>
  </tr>
  <tr>
    <td>WDS_SOCKET_PORT</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Ao ser setado, o CRA executarÃ¡ com o websocket port que foi configurado para o mÃ³dulo de hot reloading. Normalmente, o webpack-dev-server padrÃ£o do port SockJS Ã© <mark>window.location.port</mark>. AlÃ©m disso vocÃª pode utilizar esta variÃ¡vel em dev local em mais de um projeto CRA ao mesmo tempo.
    </th>
  </tr>
  <tr>
    <td>PUBLIC_URL</td>
    <td>âœ…</td>
    <td>âœ…</td>
    <th>CRA assume que seu app estÃ¡ hospedado na raiz ou em um subpath especificado no <mark>package.json</mark>. Normalmente, o CRA ignora o hostname. VocÃª pode usar esta variÃ¡vel para forÃ§ar os recursos a serem referenciados literalmente a url que vocÃª fornecer(hostname incluÃ­do). Isto pode ser particularmente Ãºtil ao usar um CDN para hospedar seu app.</th>
  </tr>
  <tr>
    <td>BUILD_PATH</td>
    <td>ğŸš«</td>
    <td>âœ…</td>
    <th>Por padrÃ£o, o CRA vai compilar o projeto em um diretÃ³rio <mark>/build</mark> adjacente ao seu <mark>/src</mark>. VocÃª pode utilizar esta variÃ¡vel para especificar um novo caminho para o CRA. O BUILD_PATH deve ser especificado como um caminho relativo Ã  raiz do seu projeto.</th>
  </tr>
  <tr>
    <td>CI</td>
    <td>âœ…</td>
    <td>âœ…</td>
    <th>Quando setado para <mark>true</mark>, o CRA trata os avisos como falhas na compilaÃ§Ã£o. Isso tambÃ©m faz com que o executor de testes nÃ£o fique ativo inspecionando. Maioria dos CIs setam esta flag por default.</th>
  </tr>
  <tr>
    <td>REACT_EDITOR</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Quando o app quebra em desenvolvimento, vocÃª pode ver o erro com um stack trace clicÃ¡vel. Ao clicar nele, o CRA tentarÃ¡ determinar o editor que vocÃª estÃ¡ utilizando com base nos processos em execuÃ§Ã£o atuais, e abrirÃ¡ o arquivo de origem. Se vocÃª nunca fez isso, certifique-se de que a variÃ¡vel de ambiente PATH do seu sistema aponta para a pasta bin do seu editor. VocÃª tambÃ©m pode definir como <mark>none</mark> para desativÃ¡-lo.</th>
  </tr>
  <tr>
    <td>CHOKIDAR_USEPOLLING</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Quando setado para <mark>true</mark>, o inspetor Ã© executado em modo de pesquisa, conforme necessÃ¡rio dentro de uma VM. Use esta opÃ§Ã£o se o <mark>npm start</mark> nÃ£o estiver detectando alteraÃ§Ãµes.</th>
  </tr>
  <tr>
    <td>GENERATE_SOURCEMAP</td>
    <td>ğŸš«</td>
    <td>âœ…</td>
    <th>Quando setador para <mark>false</mark>, os sources maps nÃ£o sÃ£o gerados no build de produÃ§Ã£o. Isto resolve os problemas de falta de memÃ³ria(OOM - Out of Memory) de algumas mÃ¡quinas menores.</th>
  </tr>
  <tr>
    <td>INLINE_RUNTIME_CHUNK</td>
    <td>ğŸš«</td>
    <td>âœ…</td>
    <th>Por padrÃ£o, o CRA irÃ¡ incorporar o script de tempo de execuÃ§Ã£o no <mark>index.html</mark> durante o build de produÃ§Ã£o. Quando setado como <mark>false</mark>, o script nÃ£o serÃ¡ incorporado e serÃ¡ importado como sempre. Normalmente isso Ã© necessÃ¡rio quando se lida com CSP(Content Security Policy).</th>
  </tr>
  <tr>
    <td>IMAGE_INLINE_SIZE_LIMIT</td>
    <td>ğŸš«</td>
    <td>âœ…</td>
    <th>Por padrÃ£o, imagens menores que 10.000 bytes sÃ£o codificadas como URI de dados em base64 e embutidas no CSS ou no build do artefato do JS. VocÃª pode utilizar esta variÃ¡vel para controlar o tamanho limite em bytes das imagens. Para desativar Ã© sÃ³ definir a variÃ¡vel como <mark>0</mark>.</th>
  </tr>
  <tr>
    <td>FAST_REFRESH</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Quando setado para <mark>false</mark>, o suporte experimental do Fast Refresh(atualizaÃ§Ã£o rÃ¡pida) Ã© desativando, permitindo assim que vocÃª possa ajustar seus componentes em tempo real sem recarregar a pÃ¡gina.</th>
  </tr>
  <tr>
    <td>TSC_COMPILE_ON_ERROR</td>
    <td>âœ…</td>
    <td>âœ…</td>
    <th>Quando setado para <mark>true</mark>, vocÃª pode executar e compilar projetos em TypeScript normalmente, mesmo se houver erros de verificaÃ§Ã£o de tipo do TypeScript. Estes erros sÃ£o exibidos como avisos no terminal e/ou no console do navegador.</th>
  </tr>
  <tr>
    <td>ESLINT_NO_DEV_ERRORS</td>
    <td>âœ…</td>
    <td>ğŸš«</td>
    <th>Quando setado para <mark>true</mark>, erros do ESLint sÃ£o convertidos para avisos durante o desenvolvimento. Como resultado, na saÃ­da do ESLint nÃ£o aparecerÃ¡ mais a sobreposiÃ§Ã£o de erro.</th>
  </tr>
  <tr>
    <td>DISABLE_ESLINT_PLUGIN</td>
    <td>âœ…</td>
    <td>âœ…</td>
    <th>Quando setado para <mark>true</mark>, o eslint-webpack-plugin serÃ¡ completamente desabilitado.</th>
  </tr>
  <tr>
    <td>DISABLE_NEW_JSX_TRANSFORM</td>
    <td>âœ…</td>
    <td>âœ…</td>
    <th>Quando setado para <mark>true</mark>, o JSX transform Ã© desabilitado. Projetos novos utilizam uma versÃ£o do React que suporta isto por padrÃ£o, mas vocÃª pode desativÃ¡-lo em projetos existentes se nÃ£o puder atualizar o React.</th>
  </tr>
</table>


<h2>CustomizÃ¡veis:</h2>

Quando vocÃª deseja adicionar uma vÃ¡riÃ¡vel customizada, Ã© necessÃ¡rio utilizar na frente:
``` javascript
  REACT_APP_
```

Exemplo:


- Setando variaveis via .env:

Antes de tudo Ã© necessÃ¡rio instalar o pacote: <a href="https://github.com/motdotla/dotenv/" target="_blank" rel="noopener noreferrer">dotenv</a>.<br>
E adicionar o cÃ³digo no inÃ­cio de suas configuraÃ§Ãµes:

``` javascript
require('dotenv').config()
``` 

EntÃ£o crie o arquivo .env na raiz do projeto.<br>
Dentro do arquivo adicione as variÃ¡veis assim:

``` javascript
  REACT_APP_EXEMPLO=abcdef.
``` 

E para utilizar:


``` javascript
  process.env.REACT_APP_EXEMPLO // irÃ¡ retornar: abcdef
``` 


- Setando variaveis via shell:



``` bash
# Windows (cmd.exe)
set "REACT_APP_EXEMPLO=abcdef" && npm start

# Windows (Powershell)
($env:REACT_APP_EXEMPLO = "abcdef") -and (npm start)

# Linux, macOS (Bash)
REACT_APP_EXEMPLO=abcdef npm start
``` 


***Fontes:***

- <a href="https://create-react-app.dev/docs/advanced-configuration/" target="_blank" rel="noopener noreferrer">Advanced Configuration</a>

- <a href="https://create-react-app.dev/docs/adding-custom-environment-variables/" target="_blank" rel="noopener noreferrer">Custom Environment Variables</a>
